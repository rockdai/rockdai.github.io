<!DOCTYPE html>
<html>
<head>
  <title>Rock's diet control log</title>
  <script src="http://libs.useso.com/js/Base64/0.3.0/base64.min.js"></script>
  <script src="http://libs.useso.com/js/json2/20130526/json2.min.js"></script>
  <script src="http://libs.useso.com/js/jquery/2.1.1/jquery.min.js"></script>
  <script src="./git_matrix.js"></script>
  <script src="./matrix_div.js"></script>

  <style type="text/css">
    body {
      margin: 0;
      padding: 0;
    }
    #chart {
      position: relative;
      width: 700px;
      height: 400px;
      overflow-x: auto;
    }
    .rect:hover {
      border: 1px groove #000;
    }
  </style>
</head>

  <body>
    <div id="chart"></div>
    <script>
      var startDate = new Date("2014-07-01");
      var endDate = new Date();
      var gridSize = 14;
      var textList = ["没能坚持！！", "控制饮食", "控制饮食+稍许运动", "控制饮食+大量运动"];
      var gitMatrix = new Chart.GitMatrix("chart", {
        "startDate": startDate,
        "endDate": endDate,
        "gridSize": gridSize,
        "textList": textList
      });

      var url = 'https://api.github.com/repos/rockdai/my_diet/contents/data.json';
      $.ajax({
        dataType: "json",
        url: url,
        headers: {
          'Accept': 'application/vnd.github.v3+json',
          'Content-Type': 'application/json;charset=UTF-8'
        },
        success: function (data) {
          data = data || {};
          data = atob(data.content);
          data = JSON.parse(data);
          gitMatrix.loadData(data);
          gitMatrix.render();
        }
      });
    </script>
  </body>
</html>
